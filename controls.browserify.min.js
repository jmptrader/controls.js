(function t(e,r,i){function n(s,a){if(!r[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return n(r?r:t)},c,c.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n})({1:[function(t,e){(function(){"use strict";function t(){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},e=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(e,function(e){return t[e]||e}):this}}function r(t,e,i){return("string"==typeof e?e:e.toString()).replace(t.define||s,function(e,r,n,o){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in i||(":"===n?(t.defineParams&&o.replace(t.defineParams,function(t,e,n){i[r]={arg:e,text:n}}),r in i||(i[r]=o)):new Function("def","def['"+r+"']="+o)(i)),""}).replace(t.use||s,function(e,n){t.useParams&&(n=n.replace(t.useParams,function(t,e,r,n){if(i[r]&&i[r].arg&&n){var o=(r+":"+n).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[o]=i[r].text.replace(new RegExp("(^|[^\\w$])"+i[r].arg+"([^\\w$])","g"),"$1"+n+"$2"),e+"def.__exp['"+o+"']"}}));var o=new Function("def","return "+n)(i);return o?r(t,o,i):o})}function i(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var n={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};"undefined"!=typeof e&&e.exports?e.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):function(){return this||(0,eval)("this")}().doT=n,String.prototype.encodeHTML=t();var o={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},s=/$^/;n.template=function(e,a,l){a=a||n.templateSettings;var c,u,h=a.append?o.append:o.split,p=0,f=a.use||a.define?r(a,e,l||{}):e;f=("var out='"+(a.strip?f.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):f).replace(/'|\\/g,"\\$&").replace(a.interpolate||s,function(t,e){return h.start+i(e)+h.end}).replace(a.encode||s,function(t,e){return c=!0,h.start+i(e)+h.endencode}).replace(a.conditional||s,function(t,e,r){return e?r?"';}else if("+i(r)+"){out+='":"';}else{out+='":r?"';if("+i(r)+"){out+='":"';}out+='"}).replace(a.iterate||s,function(t,e,r,n){return e?(p+=1,u=n||"i"+p,e=i(e),"';var arr"+p+"="+e+";if(arr"+p+"){var "+r+","+u+"=-1,l"+p+"=arr"+p+".length-1;while("+u+"<l"+p+"){"+r+"=arr"+p+"["+u+"+=1];out+='"):"';} } out+='"}).replace(a.evaluate||s,function(t,e){return"';"+i(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),c&&a.selfcontained&&(f="String.prototype.encodeHTML=("+t.toString()+"());"+f);try{return new Function(a.varname,f)}catch(d){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+f),d}},n.compile=function(t,e){return n.template(t,null,e)}})()},{}],2:[function(t,e){function r(t){this.__path=t.path||"./","/"!==this.__path[this.__path.length-1]&&(this.__path+="/"),this.__destination=t.destination||this.__path,"/"!==this.__destination[this.__destination.length-1]&&(this.__destination+="/"),this.__global=t.global||"window.render",this.__rendermodule=t.rendermodule||{},this.__settings=t.templateSettings?n(t.templateSettings,n(a.templateSettings)):void 0,this.__includes={}}function i(t){for(var e="",r=0;r<t.length;r++)e+="itself."+t[r]+"="+t[r]+";";return e}function n(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}function o(t){var e=s.readFileSync(t);return e?e.toString():(console.log("problems with "+t),void 0)}var s=t("fs"),a=e.exports=t("./doT");a.process=function(t){return new r(t).compileAll()},r.prototype.compileToFile=function(t,e,r){r=r||{};var o,l=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")),c=n(this.__includes,n(r)),u=this.__settings||a.templateSettings,h=n(u),p=a.template(e,u,c),f=[],d="";for(var v in c)c[v]!==r[v]&&c[v]!==this.__includes[v]&&(o=void 0,"string"==typeof c[v]?o=a.template(c[v],u,c):"function"==typeof c[v]?o=c[v]:c[v].arg&&(h.varname=c[v].arg,o=a.template(c[v].text,h,c)),o&&(d+=o.toString().replace("anonymous",v),f.push(v)));d+=p.toString().replace("anonymous",l),s.writeFileSync(t,"(function(){"+d+"var itself="+l+";"+i(f)+"if(typeof module!=='undefined' && module.exports) module.exports=itself;else if(typeof define==='function')define(function(){return itself;});else {"+this.__global+"="+this.__global+"||{};"+this.__global+"['"+l+"']=itself;}}());")},r.prototype.compilePath=function(t){var e=o(t);return e?a.template(e,this.__settings||a.templateSettings,n(this.__includes)):void 0},r.prototype.compileAll=function(){console.log("Compiling all doT templates...");var t,e,r,i=this.__path,n=s.readdirSync(i);for(t=0,e=n.length;e>t;t++)r=n[t],/\.def(\.dot|\.jst)?$/.test(r)&&(console.log("Loaded def "+r),this.__includes[r.substring(0,r.indexOf("."))]=o(i+r));for(t=0,e=n.length;e>t;t++)r=n[t],/\.dot(\.def|\.jst)?$/.test(r)&&(console.log("Compiling "+r+" to function"),this.__rendermodule[r.substring(0,r.indexOf("."))]=this.compilePath(i+r)),/\.jst(\.dot|\.def)?$/.test(r)&&(console.log("Compiling "+r+" to file"),this.compileToFile(this.__destination+r.substring(0,r.indexOf("."))+".js",o(i+r)));return this.__rendermodule}},{"./doT":1,fs:4}],3:[function(t,e){(function(){"use strict";function r(t){function e(){}function r(t,e){var r=[];if(e){var i=e.$data;if(i)for(var n=0,o=i.length;o>n;n++)r[n]=i[n]}for(var s in T)r[s]=T[s];for(var s in O)r[s]=O[s];if(r.state_id=Number.MIN_VALUE,r.last_operation=0,r.last_changed=void 0,t&&t.adapter&&(this.adapter=m.create(t.adapter),!this.adapter))throw new TypeError('Invalid data adapter type "'+t.adapter+'"!');return r}function n(t,e,r){if("}"===t.slice(-1)){var i=t.indexOf("{");i>=0&&(e["#{href}"]=t.substr(i+1,t.length-i-2),t=t.substr(0,i).trim())}var n=t.indexOf("."),o=t.indexOf("/"),s=t.indexOf("#"),a=-1;o>=0&&(a=o),s>=0&&(a>s||0>a)&&(a=s);var l=0>a?t:t.substr(0,a);if(l&&(0>n||a>=0&&n>a)){if(r){var n=r.indexOf(".");n>=0?r=r.substr(0,n+1):r+="."}else r="controls.";l=r+l}if(arguments.length<2)return l;if(a>=0){t.substr(a);var c,u;if(s>o?u=t.substr(s+1):s>=0&&(u=t.substr(s+1,o-s-1)),o>s?c=t.substr(o+1):o>=0&&(c=t.substr(o+1,s-o-1)),c){c=c.split(";");for(var h=0,p=c.length;p>h;h++){var f=c[h];if(f){f=f.split("=");var d=f[0],v=f[1];(d||v)&&(void 0===v&&(v=!0),e["/"+d]=v)}}}if(u){u=u.split(";");for(var h=0,p=u.length;p>h;h++){var f=u[h];if(f){f=f.split("=");var d=f[0],v=f[1];(d||v)&&(void 0===v&&(v=!0),e[d]=v)}}}}return l}function o(t,e){var r;t=t.toLowerCase();var i=m.subtypes[t];if(i)for(var n=0,s=i.length;s>n;n++){var a=i[n],l=!0;for(var c in e)if("__ctr,??".indexOf(c)<0&&a[c]!==e[c]){l=!1;break}if(l){r=a.__ctr;break}}if(!r&&(r=m[t],r&&r.isAlias&&r.__type!==t)){var u=r.parameters;for(var c in u)e[c]=u[c];r=o(r.__type,e)}return r}function s(t,e){if("string"!=typeof e)return e;var r=e.indexOf(":"),i=e.indexOf("."),n=e.indexOf("/"),o=e.indexOf("#");return(~i&&r>i||~n&&r>n||~o&&r>o)&&(r=-1),(~n&&i>n||~o&&i>o)&&(i=-1),0>i&&(e=r>=0?e.substr(0,r+1)+t.$default+e.substr(r+1):t.$default+e),e}function a(t,e){m.controlInitialize(this,"controls.Container",t,e,a.template)}function l(t,e){var r,i,n=e.$template;n&&(r=n,delete e.$template);var o=e.$outer_template;o&&(r=o,delete e.$outer_template);var s=e.$inner_template;s&&(i=s,delete e.$inner_template),m.controlInitialize(this,"controls.Custom",t,e,r,i)}function c(t,e){this.isStub=!0,m.controlInitialize(this,"controls.Stub",t,e,c.template),this.class("stub");var r=0;Object.defineProperty(this,"state",{enumerable:!0,get:function(){return r},set:function(t){t!==r&&(r=t,0===t?this.class(null,"stub-loading stub-error"):0>t?this.class("stub-error","stub-loading"):this.class("stub-loading","stub-error"),this.raise("state"),this.state>0&&this.tryReplace())}}),this.tryReplace=function(){var e=m.extend({},this.parameters),r=m.extend({},this.attributes);for(var i in this.parameters)"#{"===i.substr(0,2)&&delete e[i];var n=m.create(t["#{type}"],e,r);n&&(n.class(null,"stub stub-loading stub-error"),this.replaceItself(n))}}function u(t,e){m.controlInitialize(this,"controls.Head",t,e,u.template),this.attach=function(){u.prototype.attach.call(this,document.head)},this.attachAll=function(){u.prototype.attach.call(this,document.head),u.prototype.attachAll.call(this)}}function h(t,e){m.controlInitialize(this,"controls.Body",t,e,h.template),this.attach=function(){h.prototype.attach.call(this,document.body)},this.attachAll=function(){h.prototype.attach.call(this,document.body),h.prototype.attachAll.call(this)}}function p(t,e){this.level="1",m.controlInitialize(this,"controls.Heading",t,e,p.template),this.listen("type",function(){var t="1",e=this.parameters;for(var r in e)("level"===r||"/level"===r)&&(t=e[r]);this.level=t})}function f(t,e){if(!e||!e.src)throw new TypeError('controls.Frame: Must be defined "src" attribute!');m.controlInitialize(this,"controls.Frame",t,e,f.template)}function d(t,e){m.controlInitialize(this,"controls.Layout",t,e,d.template);var r=!1;this.cellSet=new a,this.cellSet.listen("attributes",this,function(t){var e=t.name,r=t.value,i=void 0===r||null===r,n=this._element;if(n)for(var o=n.childNodes,s=o.length-1;s>=0;s--){var a=o[s];i?a.removeAttribute(e):a.setAttribute(e,r)}}),this.listen("type",function(){var t,e=this.parameters;for(var i in e)("float"===i||"/float"===i)&&(t=e[i]);t&&this.cellSet.style("float:"+t),r=t})}function v(t,e){m.controlInitialize(this,"controls.List",t,e,v.template),this.itemSet=new a,this.itemSet.listen("attributes",this,function(t){var e=t.name,r=t.value,i=void 0===r||null===r,n=this._element;if(n)for(var o=n.childNodes,s=o.length-1;s>=0;s--){var a=o[s];i?a.removeAttribute(e):a.setAttribute(e,r)}})}var m=this;m.VERSION=i,m.id_generator=53504;var y=",add,attach,attributes,class,data,element,first,id,__type,controls,last,name,forEach,parameters,parent,remove,style,",_="A,Abbr,Address,Article,Aside,B,Base,Bdi,Bdo,Blockquote,Button,Canvas,Cite,Code,Col,Colgroup,Command,Datalist,Dd,Del,Details,Dfn,Div,Dl,Dt,Em,Embed,Fieldset,Figcaption,Figure,Footer,Form,Gnome,Header,I,IFrame,Img,Input,Ins,Kbd,Keygen,Label,Legend,Li,Link,Map,Mark,Menu,Meter,Nav,Noscript,Object,Ol,Optgroup,Option,Output,P,Pre,Progress,Ruby,Rt,Rp,S,Samp,Script,Section,Select,Small,Span,Strong,Style,Sub,Summary,Sup,Table,TBody,Td,Textarea,Tfoot,Th,Thead,Time,Title,Tr,U,Ul,Var,Video,Wbr",g=/&(?!#?\w+;)|<|>|"|'|\//g,b={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;","/":"&#47;"};m.subtypes={},m.doT=t,t.templateSettings.strip=!1,m.controlInitialize=function(e,r,i,n,o,s){var a=n||{};a.id||(a.id=(++m.id_generator).toString(16)),e.id=a.id,e.__type=r,e.parameters=i||{},e.attributes=a,e.controls=[],o&&Object.defineProperty(e,"outer_template",{enumerable:!0,writable:!0,value:"string"==typeof o?t.template(o):o}),s&&Object.defineProperty(e,"inner_template",{enumerable:!0,writable:!0,value:"string"==typeof s?t.template(s):s})},m.typeRegister=function(t,e,r){var i={},o=n(t,i).toLowerCase();if(e.is_constructor=!0,e.revive=r,o.length<t.length){var s=m.subtypes[o];s||(s=[],m.subtypes[o]=s),i.__ctr=e,s.push(i)}else{if(m[o])throw new TypeError("Type "+t+" already registered!");m[o]=e}},m.factoryRegister=function(t,e){var r={},i=n(t,r).toLowerCase();if(i.length<t.length){var o=m.subtypes[i];o||(o=[],m.subtypes[i]=o),r.__ctr=e,o.push(r)}else{if(m[i])throw new TypeError("Type "+t+" already registered!");m[i]=e}},m.typeAlias=function(t,e){var r={},i=n(e,r).toLowerCase(),s=o(i,r);if(!s)throw new TypeError("Type "+i+" not registered!");m[t.toLowerCase()]={__type:i,parameters:r,isAlias:!0}},m.createTemplatedControl=function(e,r,i){var n=e,o=n.indexOf(".");o>=0&&(n=e.substr(o+1)),r="string"==typeof r?t.template(r):r,i="string"==typeof i?t.template(i):i;var s="var __type = __type;function "+n+"(p, a){    controls.controlInitialize(this, __type, p, a, outer_template, inner_template);};"+n+".prototype = controls.control_prototype;controls.typeRegister(__type, "+n+");";Function("controls, __type, outer_template, inner_template",s)(m,e,r,i)};var x;Object.defineProperty(m,"html_cache",{enumerable:!0,get:function(){if(!x)try{x=localStorage.getItem("html_cache")||{cache_date:Date.now().valueOf()},x.cache_date=parseInt(cache.cache_date)||1,setInterval(function(){Date.now().valueOf()-parseInt(x.cache_date)>864e5&&(x={cache_date:Date.now().valueOf()},localStorage.setItem("html_cache",x)),x.modified&&localStorage.setItem("html_cache",x),x.modified=!1},1e4)}catch(t){}return x}}),m.Event=function(){var t=new Array;this.listeners=t,this.raise=function(e){for(var r={event:e,sender:this},i=0,n=t.length;n>i;i+=2)t[i].call(t[i+1],r)}},m.Event.prototype={addListener:function(t,e){if("function"==typeof t&&(e=t,t=this),e){var r=this.listeners;r.push(e),r.push(t)}},removeListener:function(t){var e=this.listeners,r=e.indexOf(t);r>=0&&e.splice(r,2)},clear:function(){this.listeners=[]}};var w={};setInterval(function(){for(var t in w)--w[t]<=0&&(delete w[t],t.raise())},30);var T={listen:function(t,e){return"function"==typeof t&&(e=t,t=this),e?(this.event||(this.event=new m.Event(this)),this.event.addListener(t,e),this):this},removeListener:function(t){var e=this.event;return e&&e.removeListener(t),this},subscribe:function(t,e){return"function"==typeof t&&(e=t,t=this),e?(this.post_event||(this.post_event=new m.Event(this)),this.post_event.addListener(t,e),this):this},unsubscribe:function(t){var e=this.post_event;return e&&e.removeListener(t),this},raise:function(t,e){var r=this.event;r&&r.raise(t);var i=this.post_event;i&&(w[this]=e||1)}},O={push:function(){for(var t=Object.getPrototypeOf(this),e=0,r=arguments.length;r>e;e++)t.push.call(this,arguments[e]);this.state_id+=r,this.last_operation=1,this.last_index=this.length-1,this.raise(this)}};e.prototype={raise:function(){}},m.typeRegister("LocalStorage",e),m.factoryRegister("DataArray",r),m.control_prototype=new function(){function e(t,e){var r=this._parent;if(t!==r){this._parent=t;var i=this._name;if(r){var n=r.controls,e=n.indexOf(this);e>=0&&n.splice(e,1),i&&r.hasOwnProperty(i)&&r[i]===this&&delete r[i]}if(t){var o=t.controls;void 0===e?o.push(this):o.splice(e,0,this),i&&(t[i]=this)}this.raise("parent",this)}}function r(t,e,r){var i=t.events;i||(i={},t.events=i);var n=r?"#"+e:e,o=i[n];if(!o&&(o=new m.Event,o.event=e,o.is_dom_event=!!(s.indexOf(","+e+",")>=0),o.capture=r,i[n]=o,s.indexOf(e)>=0)){var a=t._element;a&&a.addEventListener(e,o.raise,r)}return o}function i(t){this.raise("data",t)}Object.defineProperty(this,"$",{enumerable:!0,get:function(){return this._element?$(this._element):$("#"+this.id)}}),Object.defineProperty(this,"name",{enumerable:!0,get:function(){return this._name},set:function(t){if(y.indexOf(","+t+",")>=0)throw new SyntaxError('Invalid name "'+t+'"!');var e=this._name;if(t!==e){this._name=t;var r=this._parent;r&&(e&&r.hasOwnProperty(e)&&r[e]===this&&delete r[e],t&&(r[t]=this))}}}),Object.defineProperty(this,"element",{enumerable:!0,get:function(){return this._element},set:function(t){if(0===arguments.length)return this._element;var e=this._element;if(t!==e){this._element=t;var r=this.events;if(r)for(var i in r){var n=r[i];n.is_dom_event&&(e&&e.removeEventListener(n.event,n.raise,n.capture),t&&t.addEventListener(n.event,n.raise,n.capture))}this.raise("element",t)}}}),Object.defineProperty(this,"parent",{enumerable:!0,get:function(){return this._parent},set:e}),Object.defineProperty(this,"wrapper",{enumerable:!0,get:function(){return this._wrapper},set:function(t){var e=this._wrapper;if(t!==e){if(this._wrapper=t,e){var r=e.controls,i=r.indexOf(this);i>=0&&r.splice(i,1)}if(t){var n=t.controls;n.push(this)}}}}),Object.defineProperty(this,"length",{enumerable:!0,get:function(){return this.controls.length}}),Object.defineProperty(this,"first",{enumerable:!0,get:function(){return this.controls[0]}}),Object.defineProperty(this,"last",{enumerable:!0,get:function(){return this.controls[this.controls.length-1]}}),this.outer_template=t.template("<div{{=it.printAttributes()}}>{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}</div>"),this.inner_template=t.template("{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}"),this.innerHTML=function(){var t=this.HashControl;if(t){var e,r=t.outerHTML(),i=this.id+"inner",n=m.html_cache;return r===this.HashValue?(e=n[i],e||(e=this.inner_template(this),n[i]=e,n.modified=!0)):(e=this.inner_template(this),n[i]=e,n.modified=!0,this.HashValue=r),e}return this.inner_template(this)},this.outerHTML=function(){var t=this.HashControl;if(t){if(t===this){var e=this.HashValue;return e||(e=this.outer_template(this),e||console.log("908FB5 Must have a non-empty value!"),this.HashValue=e),e}var r,e=t.outerHTML(),i=this.id,n=m.html_cache;return e===this.HashValue?(r=n[i],r||(r=this.outer_template(this),n[i]=r,n.modified=!0)):(r=this.outer_template(this),n[i]=r,n.modified=!0,this.HashValue=e),r}return this.outer_template(this)},this.wrappedHTML=function(){var t=this._wrapper;return t?t.wrappedHTML():this.outerHTML()},this.template=function(e,r){if(e){this.hasOwnProperty("outer_template")||Object.defineProperty(this,"outer_template",{configurable:!0,enumerable:!0,writable:!0});var i=typeof e;"string"===i?(this.outer_template=t.template(e),this.outer_template_text=e):"function"===i&&(this.outer_template=e,this.outer_template_text="@func")}e&&(this.hasOwnProperty("inner_template")||Object.defineProperty(this,"inner_template",{configurable:!0,enumerable:!0,writable:!0}),i=typeof r,"string"===i?(this.inner_template=t.template(r),this.inner_template_text=r):"function"===i&&(this.inner_template=r,this.inner_template_text="@func")),this._element&&this.refresh()},this.toJSON=function(){var t={__type:this.type(),id:this.id,name:this.name,attributes:this.attributes,controls:this.controls},e=this.outer_template_text;e&&(t.outer_template="@func"===e?""+this.outer_template:this.outer_template_text);var r=this.inner_template_text;return r&&(t.inner_template="@func"===r?""+this.inner_template:this.inner_template_text),t},this.refresh=function(){var t=this._element;if(t)if(t.parentNode)try{var e=this.outerHTML();e!==t.outerHTML&&(this.detachAll(),t.outerHTML=e,this.attachAll())}catch(r){this._element=void 0}else this._element=void 0},this.refreshInner=function(){var t=this._element;t&&(t.innerHTML=this.innerHTML())},this.attach=function(t){if(t){if("string"==typeof t)this.element=document.getElementById(t);else if("object"==typeof t){var e=t._element;this.element=e?e:t}}else this.element=document.getElementById(this.id)},this.attachAll=function(){this._element||(this.element=document.getElementById(this.id));for(var t=this.controls,e=t.length-1;e>=0;e--)t[e].attachAll()},this.detach=function(){this.element=void 0},this.detachAll=function(){this.element=void 0;for(var t=this.controls,e=t.length-1;e>=0;e--)t[e].detachAll()},this.replaceItself=function(t){for(var r=this.controls,i=r.length-1;i>=0;i--){var n=r.shift();t.add(n)}var o=this.parent;if(o){var s=o.controls.indexOf(this);this.parent=void 0,e.call(t,o,s);var a=this._element;a?(t.element=a,t.refresh()):t.element=void 0}else t.parent=void 0},this.createElement=function(t,e){var r=this._element;if(r)throw new TypeError("Already exists!");if(!t&&this.parent&&(t=this.parent.element),t){var i=t.insertAdjacentHTML;if(i)switch(e){case 1:i.call(t,"afterbegin",this.outerHTML());break;case 2:i.call(t,"beforebegin",this.outerHTML());break;case 3:i.call(t,"afterend",this.outerHTML());break;default:i.call(t,"beforeend",this.outerHTML())}else{var n=document.createDocumentFragment(),o=document.createElement("div");o.innerHTML=this.outerHTML();for(var s=o.childNodes,a=0,l=s.length;l>a;a++)n.appendChild(s[a]);switch(e){case 1:0===t.childNodes.length?t.appendChild(n):t.insertBefore(t.firstChild,n);break;case 2:var c=t.parentNode;c&&c.insertBefore(n,t);break;case 3:var c=t.parentNode;c&&c.insertAfter(n,t);break;default:t.appendChild(n)}}}this.attachAll()},this.deleteElement=function(){var t=this._element;if(t){var e=t.parentNode;e&&e.removeChild(t),this._element=void 0}};var s=",change,DOMActivate,load,unload,abort,error,select,resize,scroll,blur,DOMFocusIn,DOMFocusOut,focus,focusin,focusout,click,dblclick,mousedown,mouseenter,mouseleave,mousemove,mouseover,mouseout,mouseup,wheel,keydown,keypress,keyup,oncontextmenu,compositionstart,compositionupdate,compositionend,DOMAttrModified,DOMCharacterDataModified,DOMNodeInserted,DOMNodeInsertedIntoDocument,DOMNodeRemoved,DOMNodeRemovedFromDocument,DOMSubtreeModified,";this.listen=function(t,e,i,n){if("function"==typeof e&&(n=i,i=e,e=this),!t||!i)return this;var o=r(this,t,n),s=i instanceof Function?i:Function("event",i);return o.addListener(e,s),this},this.addListener=function(t,e,r,i){return this.listen(t,e,r,i)},this.removeListener=function(t,e,i){if(!t||!e)return this;var n=r(this,t,i);return n.removeListener(e),this},this.raise=function(t,e,i){if(!t)return!1;var n=r(this,t,i);n.raise(e)},this.parameter=function(t,e){var r=this.parameters;return arguments.length>1?(e!==r[t]&&(r[t]=e,this.refresh()),void 0):r[t]||r["/"+t]},this.attr=function(t,e){var r=this.attributes;return 0===arguments.length?void 0:1===arguments.length?r[t]:(e!==r[t]&&(r[t]=e,this._element&&this.refresh()),void 0)},this.attrs=function(t){var e=this.attributes;if(arguments.length>0){var r=!1;for(var i in t){var n=t[i];n!==e[i]&&(e[i]=n,r=!0)}r&&this._element&&this.refresh()}return e},this.type=function(t,e){if(0===arguments.length){var r=[],i=[],o=this.parameters;for(var s in o)"/"!==s[0]?i.push(s+"="+o[s]):r.push(s.substr(1)+"="+o[s]);var t=this.__type;return r.length>0&&(t+="/"+r.join(";")),i.length>0&&(t+="#"+i.join(";")),t}var o={};if(e&&this.parent){var a=parent.parameters;for(var s in a)"/"===s[0]&&(o[s]=a[s])}var l=n(t,o,this.__type);l&&(this.__type=l),this.parameters=o,this.raise("type")},this.printAttributes=function(t){var e=[],r=this.attributes;if(t)if("-"===t[0]){var i=t.substr(1).split(/ |,|;/g);for(var n in this.attributes)if("$"!==n[0]&&i.indexOf(n)<0){var o=r[n];o&&e.push(n+'="'+o+'"')}}else for(var s=t.split(/ |,|;/g),a=0,l=s.length;l>a;a++){var c=s[a],o=r[c];o&&e.push(c+'="'+o+'"')}else for(var n in r)if("$"!==n[0]){var o=r[n];o&&e.push(n+'="'+o+'"')}return 0===e.length?"":" "+e.join(" ")},this.text=function(t){if(arguments.length>0){var e=this.attributes,r=e.$text;t!==r&&(e.$text=t,this.refresh())}return this.attributes.$text},this.style=function(t){if(t){var e=this.attributes,r=e.style;if(t!==r){e.style=t;var i=this._element;i&&(i.style=t),this.raise("attributes",{name:"style",value:t})}}return this.attributes.style},this.class=function(t,e){var r=this.attributes;if(t||e){var i=r.class,n=i?i.split(" "):[];if(e){e=e.split(/\s|,|;/g);for(var o=0,s=e.length;s>o;o++){var a=e[o],l=n.indexOf(a);l>=0&&n.splice(l,1)}}if(t){t=t.split(/\s|,|;/g);for(var o=0,s=t.length;s>o;o++){var c=t[o];n.indexOf(c)<0&&n.push(c)}}if(i=n.join(" "),i!==r.class){r.class=i;var u=this._element;u&&(u.className=i),this.raise("attributes",{name:"class",value:i})}}return r.class},this.insert=function(t,r,i,s,a,l){if(r){if("number"!=typeof i&&(l=a,a=s,s=i,i=1),s instanceof Function&&(l=a,a=s,s=void 0),Array.isArray(r)){for(var c,u=0,h=r.length;h>u;u++)c=this.add(r[u],i,s,a,l);return c}if("object"==typeof r){var p=r;return p.hasOwnProperty("__type")&&e.call(r,this,t),void 0}var f,d=r.indexOf(":"),v=r.indexOf("{");d>=0&&(0>v||v>d)&&(f=r.substr(0,d),r=r.substr(d+1));var m=this.parameters,y={};for(var _ in m)"/"===_[0]&&(y[_]=m[_]);var g=n(r,y),b=o(g,y);if(!b){if(!A)throw new TypeError("Type "+g+" not registered!");y["#{type}"]=r,y["#{__type}"]=g,y["#{callback}"]=a,y["#{this_arg}"]=l,b=o("controls.Stub",y)}for(var c,u=0;i>u;u++){var $={};for(var _ in y)$[_]=y[_];var x={"class":""};if(s)for(var _ in s)x[_]=s[_];var w=new b($,x);f&&(w.name=f),w.raise("type"),e.call(w,this,t),a&&a.call(l||this,w),c=w}return c}},this.add=function(t,e,r,i,n){return this.insert(this.controls.length,t,e,r,i,n)},this.unshift=function(t,e,r,i,n){return this.insert(0,t,e,r,i,n)},this.remove=function(t){return 0===arguments.length?(this.parent=void 0,void 0):(t&&(t.parent=void 0),void 0)},this.removeAll=function(){for(var t=this.controls,e=t.length-1;e>=0;e--)this.remove(t[e])},this.bind=function(t,e){var r=this.data;t!==r&&(this.data=t,r&&(r.removeListener(i),r.unsubscribe(i)),t&&(e?t.subscribe(this,i):t.listen(this,i)))},this.$builder=function(){return m.$builder(this)},this.every=function(t,e){return this.controls.every(t,e||this)},this.filter=function(t,e){return this.controls.filter(t,e||this)},this.forEach=function(t,e){return this.controls.forEach(t,e||this)},this.map=function(t,e){return this.controls.map(t,e||this)},this.some=function(t,e){return this.controls.some(t,e||this)}},m.resolveType=o;var A=0;m.createOrStub=function(){A=1;try{return m.create.apply(this,arguments)}catch(t){}finally{A=0}},m.create=function(t,e,r,i,s){switch(arguments.length){case 0:throw new SyntaxError("Invalid Type argument value!");case 1:r={},e={};break;case 2:"function"==typeof e?(s=r,i=e,r={},e={}):(r=e||{},e={});break;default:"function"==typeof r?(s=i,i=r,r=e||{},e={}):"function"==typeof e?(s=r,i=e,r={},e={}):(r=r||{},e=e||{})}var a=n(t,e),l=o(a,e);if(!l){if(!A)throw new TypeError("Type "+a+" not registered!");e["#{type}"]=t,e["#{__type}"]=a,e["#{callback}"]=i,e["#{this_arg}"]=s,l=o("controls.Stub",e)}r.class||(r.class="");var c=l.is_constructor?new l(e,r):l(e,r);return c.raise("type"),c},m.$builder=function(t){return this.$move?(this.$default="controls.",this.$context=t,this.$context_stack=[],void 0):new m.$builder(t)},m.$builder.prototype={$move:function(t){this.$context=t},$namespace:function(t){t.indexOf(".")<0&&(t+="."),this.$default=t},$C:function(t,e,r,i,n){var o=this.$context;if(!o)throw new TypeError("$C: context undefined! "+t);return o.add(s(this,t),e,r,i,n)},$$C:function(t,e,r,i,n){"number"!=typeof e&&(n=i,i=r,r=e,e=1),"function"==typeof r&&(n=i,i=r,r=void 0);var o=this.$context;if(!o)throw new TypeError("$builder $$C: context undefined! "+t);var a;return i?(this.$context_stack.push(this.$context),a=o.add(s(this,t),e,r,function(t){this.$context=t,i.call(n||t,t)},this),this.$context=this.$context_stack.pop()):(a=o.add(s(this,t),e,r),this.$context=a),a},$T:function(t,e,r,i,n){"number"!=typeof e&&(n=i,i=r,r=e,e=1),"function"==typeof r&&(n=i,i=r,r=void 0);var o=this.$context;if(!o)throw new TypeError("$T: context undefined!");var s=r||{};return s.$template=t,o.add("controls.Custom",e,s,i,n)},$$T:function(t,e,r,i,n){"number"!=typeof e&&(n=i,i=r,r=e,e=1),"function"==typeof r&&(n=i,i=r,r=void 0);var o=this.$context;if(!o)throw new TypeError("$$T: context undefined! ");var s=r||{};s.$template=t;var a;return i?(this.$context_stack.push(this.$context),a=o.add("controls.Custom",e,s,function(t){this.$context=t,i.call(n||t,t)},this),this.$context=this.$context_stack.pop()):(a=o.add("controls.Custom",e,s),this.$context=a),a},$X:function(t,e,r,i,n){"number"!=typeof e&&(n=i,i=r,r=e,e=1),"function"==typeof r&&(n=i,i=r,r=void 0);var o=this.$context;if(!o)throw new TypeError("$X: context undefined!");var s=r||{};return s.$text=t,o.add("controls.Container",e,s,i,n)},$$X:function(t,e,r,i,n){"number"!=typeof e&&(n=i,i=r,r=e,e=1),"function"==typeof r&&(n=i,i=r,r=void 0);var o=this.$context;if(!o)throw new TypeError("$$X: context undefined!");var s=r||{};s.$text=t;var a;return i?(this.$context_stack.push(this.$context),a=o.add("controls.Container",e,s,function(t){this.$context=t,i.call(n||t,t)},this),this.$context=this.$context_stack.pop()):(a=o.add("controls.Container",e,s),this.$context=a),a},$E:function(t,e,r,i,n){return this.$X(m.encodeHTML(t),e,r,i,n)},$$E:function(t,e,r,i,n){return this.$$X(m.encodeHTML(t),e,r,i,n)},$encode:function(t){return m.encodeHTML(t)},forEach:function(t,e){var r=this.$context;r&&r.controls.forEach(t,e||this)},$$forEach:function(t,e){var r=this.$context;if(r){this.$context_stack.push(this.$context);var i=r.controls;for(var n in i){var r=i[n];this.$context=r,t.call(e||this,r)}this.$context=this.$context_stack.pop()}}},m.defCommand=function(t,e){m.$builder.prototype[t]=e},"p".split(",").forEach(function(t){m.defCommand("$"+t,function(e,r,i){this.$C(t,{$text:e,"class":r,style:i})}),m.defCommand("$$"+t,function(e,r,i){this.$$C(t,{$text:e,"class":r,style:i})})}),"h1,h2,h3,h4,h5,h6".split(",").forEach(function(t){m.defCommand("$"+t,function(e,r,i,n){r&&(r=r.replace(/ /g,"-")),this.$C(t,{$text:e,id:r,"class":i,style:n})}),m.defCommand("$$"+t,function(e,r,i,n){r&&(r=r.replace(/ /g,"-")),this.$$C(t,{$text:e,id:r,"class":i,style:n})})}),m.$test=function(t,e){return this.$move?(this.$default="controls.",this.$context=t,this.$context_stack=[],e.call(this),void 0):new m.$test(t,e)},m.$test.prototype=m.$builder.prototype,m.reviverJSON=function(t,e){if("object"==typeof e&&null!==e&&e.hasOwnProperty("__type")){var r={},i=n(e.__type,r),s=o(i,r);if(!s)throw new TypeError("controls.reviverJSON(): "+i+" constructor not registered!");var a,l=s.revive;return a=l?l(s,r,e):m.reviveControl(s,r,e),a.raise("type"),a}return e},m.revive=function M(t){if(t){for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];(Array.isArray(r)||"object"==typeof r&&r.hasOwnProperty("__type"))&&(t[e]=M(r))}"object"==typeof t&&t.hasOwnProperty("__type")&&(t=reviverJSON(null,t))}return t},m.reviveControl=function(t,e,r){if(r){var i=new t(e,r.attributes);return r.controls&&(i.controls=r.controls),r.template&&i.template(r.template),i}},m.encodeHTML=function(t){return t?t.replace(g,function(t){return b[t]||t}):t},m.extend=function(t,e){for(var r in e)t[r]=e[r];return t},m.delay=function(t,e){return setTimeout(function(){return t.apply(null,Array.prototype.slice.call(arguments,2))},e)},a.prototype=m.control_prototype,a.template=t.template("{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}"),m.typeRegister("controls.Container",a),l.prototype=m.control_prototype,m.typeRegister("controls.Custom",l),c.prototype=m.control_prototype,c.template=t.template("<div{{=it.printAttributes()}}>{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}</div>"),m.typeRegister("controls.Stub",c),u.prototype=m.control_prototype,u.template=t.template("<head>{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}</head>"),m.typeRegister("controls.Head",u),h.prototype=m.control_prototype,h.template=t.template('<body{{=it.printAttributes("-id")}}>{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}</body>'),m.typeRegister("controls.Body",h);var L="",S="function %%NAME%%(p, a){    controls.controlInitialize(this, 'controls.%%NAME%%', p, a, %%NAME%%.outer_template);};%%NAME%%.prototype = controls.control_prototype;%%NAME%%.outer_template = doT.template('%%OPENTAG%%{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}%%CLOSETAG%%');controls.typeRegister('controls.%%NAME%%', %%NAME%%);\n";_.split(",").forEach(function(t){var e=t.toLowerCase();L+=S.replace(/%%NAME%%/g,t).replace(/%%OPENTAG%%/g,"<"+e+"{{=it.printAttributes()}}>").replace(/%%CLOSETAG%%/g,"</"+e+">")}),Function("doT,controls",L)(t,m),m.createTemplatedControl("controls.Area","<area{{=it.printAttributes()}}>"),m.createTemplatedControl("controls.Hr","<hr{{=it.printAttributes()}}>"),m.createTemplatedControl("controls.Meta","<meta{{=it.printAttributes()}}>"),m.createTemplatedControl("controls.Param","<param{{=it.printAttributes()}}>"),m.createTemplatedControl("controls.Source","<source{{=it.printAttributes()}}>"),m.createTemplatedControl("controls.Track","<track{{=it.printAttributes()}}>"),p.prototype=m.control_prototype,p.template=t.template("<h{{=it.level}}{{=it.printAttributes()}}>{{? it.attributes.$text }}{{=it.attributes.$text}}{{?}}{{~it.controls :value:index}}{{=value.wrappedHTML()}}{{~}}</h{{=it.level}}>"),m.typeRegister("controls.Heading",p),m.typeAlias("controls.H1","controls.Heading#level=1"),m.typeAlias("controls.H2","controls.Heading#level=2"),m.typeAlias("controls.H3","controls.Heading#level=3"),m.typeAlias("controls.H4","controls.Heading#level=4"),m.typeAlias("controls.H5","controls.Heading#level=5"),m.typeAlias("controls.H6","controls.Heading#level=6"),f.prototype=m.control_prototype,f.template=t.template("<iframe{{=it.printAttributes()}}></iframe>"),m.typeRegister("controls.Frame",f),d.prototype=m.control_prototype,d.template=t.template('<div{{=it.printAttributes()}}>{{~it.controls :value:index}}<div data-type="layout-item"{{=it.cellSet.printAttributes("-id")}}>{{=value.wrappedHTML()}}</div>{{~}}{{?it.clearfix}}<div style="clear:both;"></div>{{?}}</div>'),m.typeRegister("controls.Layout",d),v.prototype=m.control_prototype,v.template=t.template('<ul{{=it.printAttributes()}}>{{~it.controls :value:index}}<li{{=it.itemSet.printAttributes("-id")}}>{{=value.wrappedHTML()}}</li>{{~}}</ul>'),m.typeRegister("controls.List",v)
}var i="0.6.3";if("undefined"!=typeof e&&"function"==typeof t&&e.exports)e.exports=new r(t("dot")),"undefined"!=typeof window&&(window.controls=e.exports);else if("function"==typeof define&&define.amd){var n;define(["doT"],function(t){return n||(n=new r(t)),n})}else if(!this.controls||this.controls.VERSION<i){if("undefined"==typeof doT)throw new TypeError("controls.js: doT.js not found!");this.controls=new r(doT)}}).call(this)},{dot:2}],4:[function(){},{}]},{},[3]);